# 高性能字符串搜索实现

本项目实现了一个高性能的并行字符串搜索系统，用于在大规模文本数据中进行模式匹配。目标任务为处理维基百科英文摘要数据（约998MB）的字符串搜索任务。

## 核心特性

### 1. 多线程并行处理
- 采用线程池实现并行搜索
- 线程池实现来源于 [progschj/ThreadPool](https://github.com/progschj/ThreadPool)
- 自动检测CPU核心数，优化线程数量
- 支持动态任务分配和负载均衡

### 2. SIMD 加速
- 使用 SSE 指令集进行向量化处理
- 支持最大16字节的模式串SIMD匹配
- 通过 `_mm_cmpeq_epi8` 和 `_mm_movemask_epi8` 实现快速字符比较
- 针对不同编译器提供跨平台的 CTZ (Count Trailing Zeros) 实现

### 3. 混合搜索算法
- BMHBNFS (Boyer-Moore-Horspool + Bloom + Need For Speed)
- 针对不同长度的模式串自动选择最优算法：
  - 短模式串（≤16字节）：SIMD搜索
  - 长模式串：BMHBNFS算法

### 4. 内存优化
- 使用内存映射（Memory Mapping）技术加载大文件
- 块式处理避免内存峰值
- 每个搜索块大小默认为1MB

## 性能优化

1. 文本分块：将大文件分割成较小的块进行并行处理
2. 向量化：利用SIMD指令集并行处理多个字符
3. 内存映射：避免将整个文件加载到内存
4. 智能算法选择：根据模式串长度自动选择最优算法

## 使用限制

- SIMD搜索仅支持16字节以内的模式串
- 需要支持SSE指令集的CPU
- 当前仅支持Windows平台（因使用Windows API进行内存映射）

## 编译要求

- 支持C++11或更高版本的编译器
- 支持SSE指令集
- Windows操作系统
